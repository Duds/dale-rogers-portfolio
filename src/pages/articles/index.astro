---
import Layout from "@/layouts/BaseLayout.astro";
import Container from "@/components/layout/Container.astro";
import PageHeader from "@/components/ui/PageHeader.astro";
import "@/styles/components/articles-page.css";

export const prerender = true;
---

<Layout
  title="Articles | Dale Rogers - Service Designer and Digital Strategist"
  description="Thoughts and insights on service design, digital strategy, and technology"
>
  <Container narrow={true}>
    <PageHeader
      title="Articles"
      description="Thoughts and insights on service design, digital strategy, and technology"
    />
  </Container>

  <Container>
    <div class="articles-page">
      <!-- Skeleton Loading -->
      <div
        class="articles-skeleton"
        role="status"
        aria-label="Loading articles"
      >
        <!-- Results Summary Skeleton -->
        <div class="articles-results-summary">
          <div class="articles-results-summary__skeleton">
            <div class="skeleton-line skeleton-line--short"></div>
          </div>
        </div>

        <!-- Articles Grid Skeleton -->
        <div class="articles-grid articles-grid--skeleton">
          {
            Array.from({ length: 6 }).map(() => (
              <div class="articles-grid__item articles-grid__item--skeleton">
                <div class="article-skeleton">
                  <div class="article-skeleton__image" />
                  <div class="article-skeleton__content">
                    <div class="article-skeleton__meta">
                      <div class="skeleton-line skeleton-line--short" />
                      <div class="skeleton-line skeleton-line--short" />
                    </div>
                    <div class="article-skeleton__title skeleton-line" />
                    <div class="article-skeleton__description">
                      <div class="skeleton-line" />
                      <div class="skeleton-line skeleton-line--short" />
                    </div>
                    <div class="article-skeleton__tags">
                      <div class="skeleton-tag" />
                      <div class="skeleton-tag" />
                      <div class="skeleton-tag" />
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <!-- Pagination Skeleton -->
        <div class="pagination-skeleton">
          <div class="skeleton-button skeleton-button--prev"></div>
          <div class="skeleton-button skeleton-button--next"></div>
        </div>
      </div>
    </div>
  </Container>

  <script>
    // Redirect to first page after a brief delay to show skeleton
    setTimeout(() => {
      window.location.href = "/articles/1";
    }, 1500);
  </script>
</Layout>
