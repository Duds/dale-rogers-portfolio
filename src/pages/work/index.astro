---
import Layout from "@/layouts/BaseLayout.astro";
import Container from "@/components/layout/Container.astro";
import PageHeader from "@/components/ui/PageHeader.astro";
import "@/styles/components/work-page.css";

export const prerender = true;
---

<Layout 
  title="Work & Case Studies | Dale Rogers - Service Designer and Digital Strategist"
  description="Explore my portfolio of successful projects and learn how I've helped clients achieve their goals through innovative service design solutions."
>
  <Container narrow={true}>
    <PageHeader
      title="Work & Case Studies"
      description="Explore my portfolio of successful projects and learn how I've helped clients achieve their goals through innovative service design solutions."
    />
  </Container>

  <Container>
    <div class="work-page">
      <!-- Skeleton Loading -->
      <div class="work-skeleton" role="status" aria-label="Loading case studies">
        <!-- Results Summary Skeleton -->
        <div class="work-results-summary">
          <div class="work-results-summary__skeleton">
            <div class="skeleton-line skeleton-line--short"></div>
          </div>
        </div>

        <!-- Case Studies Grid Skeleton -->
        <div class="case-studies-grid case-studies-grid--skeleton">
          {Array.from({ length: 6 }).map(() => (
            <div class="case-studies-grid__item case-studies-grid__item--skeleton">
              <div class="case-study-skeleton">
                <div class="case-study-skeleton__image"></div>
                <div class="case-study-skeleton__content">
                  <div class="case-study-skeleton__badges">
                    <div class="skeleton-badge skeleton-badge--client"></div>
                    <div class="skeleton-badge skeleton-badge--industry"></div>
                  </div>
                  <div class="case-study-skeleton__title skeleton-line"></div>
                  <div class="case-study-skeleton__description">
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line skeleton-line--short"></div>
                  </div>
                  <div class="case-study-skeleton__tags">
                    <div class="skeleton-tag"></div>
                    <div class="skeleton-tag"></div>
                    <div class="skeleton-tag"></div>
                  </div>
                  <div class="case-study-skeleton__link skeleton-line skeleton-line--short"></div>
                </div>
              </div>
            </div>
          ))}
        </div>

        <!-- Pagination Skeleton -->
        <div class="pagination-skeleton">
          <div class="skeleton-button skeleton-button--prev"></div>
          <div class="skeleton-button skeleton-button--next"></div>
        </div>
      </div>

      <!-- Loading Message -->
      <div class="loading-message" role="status" aria-live="polite">
        <div class="loading-message__content">
          <div class="loading-message__spinner"></div>
          <p class="loading-message__text">Loading case studies...</p>
        </div>
      </div>
    </div>
  </Container>

  <script>
    // Redirect to first page after a brief delay to show skeleton
    setTimeout(() => {
      window.location.href = '/work/1';
    }, 1500);
  </script>
</Layout>
