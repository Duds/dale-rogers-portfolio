---
import Layout from "@/layouts/BaseLayout.astro";
import Container from "@/components/layout/Container.astro";
import PageHeader from "@/components/ui/PageHeader.astro";
import Skeleton from "@/components/ui/Skeleton.astro";
import "@/styles/components/work-page.css";

export const prerender = true;
---

<Layout
  title="Work & Case Studies | Dale Rogers - Service Designer and Digital Strategist"
  description="Explore my portfolio of successful projects and learn how I've helped clients achieve their goals through innovative service design solutions."
>
  <Container narrow={true}>
    <PageHeader
      title="Work & Case Studies"
      description="Explore my portfolio of successful projects and learn how I've helped clients achieve their goals through innovative service design solutions."
    />
  </Container>

  <Container>
    <div class="work-page">
      <!-- Skeleton Loading -->
      <div
        class="work-skeleton"
        role="status"
        aria-label="Loading case studies"
      >
        <!-- Results Summary Skeleton -->
        <div class="work-results-summary">
          <div class="work-results-summary__skeleton">
            <Skeleton className="h-4 w-1/3" />
          </div>
        </div>

        <!-- Case Studies Grid Skeleton -->
        <div class="case-studies-grid case-studies-grid--skeleton">
          {
            Array.from({ length: 6 }).map(() => (
              <div class="case-studies-grid__item case-studies-grid__item--skeleton">
                <div class="case-study-skeleton">
                  <Skeleton className="w-full h-48" />
                  <div class="case-study-skeleton__content">
                    <div class="case-study-skeleton__badges">
                      <Skeleton className="h-6 w-32 rounded-full" />
                      <Skeleton className="h-6 w-24 rounded-full" />
                    </div>
                    <Skeleton className="h-4 w-full" />
                    <div class="case-study-skeleton__description">
                      <Skeleton className="h-4 w-full" />
                      <Skeleton className="h-4 w-1/2" />
                    </div>
                    <div class="case-study-skeleton__tags">
                      <Skeleton className="h-6 w-16 rounded-full" />
                      <Skeleton className="h-6 w-16 rounded-full" />
                      <Skeleton className="h-6 w-16 rounded-full" />
                    </div>
                    <Skeleton className="h-4 w-24" />
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <!-- Pagination Skeleton -->
        <div class="pagination-skeleton">
          <Skeleton className="h-10 w-24" />
          <Skeleton className="h-10 w-24" />
        </div>
      </div>
    </div>
  </Container>

  <script>
    // Redirect to first page after a brief delay to show skeleton
    setTimeout(() => {
      window.location.href = "/work/1";
    }, 1500);
  </script>
</Layout>
