---
// MermaidControls.astro
---

<div class="mermaid-controls">
  <div class="control-group">
    <button onclick="window.loadExample()" class="control-button">
      <svg viewBox="0 0 24 24"
        ><path
          d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"
        ></path><path d="M7 12h2v5H7zm4-3h2v8h-2zm4-3h2v11h-2z"></path></svg
      >
      Load Example
    </button>
    <button onclick="window.clearDiagram()" class="control-button">
      <svg viewBox="0 0 24 24"
        ><path
          d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
        ></path></svg
      >
      Clear
    </button>
  </div>

  <div class="control-group">
    <button onclick="window.exportSvg()" class="control-button">
      <svg viewBox="0 0 24 24"
        ><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></svg
      >
      Export SVG
    </button>
    <button onclick="window.exportPng()" class="control-button">
      <svg viewBox="0 0 24 24"
        ><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></svg
      >
      Export PNG
    </button>
  </div>

  <div class="control-group">
    <button onclick="window.saveTemplate()" class="control-button">
      <svg viewBox="0 0 24 24"
        ><path
          d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"
        ></path></svg
      >
      Save Template
    </button>
    <button onclick="window.saveTemplateAs()" class="control-button">
      <svg viewBox="0 0 24 24"
        ><path
          d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"
        ></path></svg
      >
      Save As...
    </button>
  </div>

  <div class="control-group">
    <label class="control-label">
      <input type="checkbox" id="auto-update" checked />
      Auto-update
    </label>
  </div>
</div>

<style>
  @reference "tailwindcss";

  .mermaid-controls {
    @apply flex flex-wrap gap-4 p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700;
  }

  .control-group {
    @apply flex gap-2;
  }

  .control-button {
    @apply flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300
           border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700
           transition-colors text-sm font-medium;
  }

  .control-button svg {
    @apply w-5 h-5;
  }

  .control-label {
    @apply flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 cursor-pointer;
  }

  .control-label input[type="checkbox"] {
    @apply w-4 h-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-600;
  }
</style>

<script>
  import { setupControls } from "../shared/core/controls.js";

  // Initialize controls when component is mounted
  document.addEventListener("DOMContentLoaded", () => {
    setupControls();
  });
</script>
