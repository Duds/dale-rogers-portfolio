---
import Container from "@/components/layout/Container.astro";
import Button from "@/components/ui/Button.astro";
// Use a simple relative path
import servicesData from "../../../../content/services/services.json";

/**
 * Services Section Component
 *
 * Displays a grid of services offered with solid color backgrounds,
 * each with an image, title, and description.
 *
 * @component
 * @example
 * ```astro
 * <Services />
 * ```
 */

interface ServiceData {
  title: string;
  description: string;
  variant: "purple" | "black" | "green" | "orange";
  imageUrl: string;
  icon: string;
  link: string;
}

// Cast the imported data to our interface type
const services = servicesData as ServiceData[];

// For debugging purposes
console.log("Services count:", services.length);

const getVariantClasses = (variant: ServiceData["variant"]) => {
  const variants = {
    purple:
      "bg-primary-purple/95 hover:bg-primary-purple dark:bg-primary-purple/90 dark:hover:bg-primary-purple",
    black:
      "bg-primary-black/95 hover:bg-primary-black dark:bg-primary-black/90 dark:hover:bg-primary-black",
    green:
      "bg-primary-green/95 hover:bg-primary-green dark:bg-primary-green/90 dark:hover:bg-primary-green",
    orange:
      "bg-primary-orange/95 hover:bg-primary-orange dark:bg-primary-orange/90 dark:hover:bg-primary-orange",
  };
  return variants[variant];
};

// Section content
const smallHeading = "Services";
const heading = "Our expertise at your service";
const description =
  "We transform human experiences through thoughtful design, deep research, and strategic innovation.";
---

<section class="w-full py-20 bg-background">
  <Container fullWidth={true}>
    <div class="mb-12">
      <div class="flex justify-between items-start mb-8">
        <div class="max-w-2xl">
          <p class="text-sm font-medium text-muted-foreground mb-3">
            {smallHeading}
          </p>
          <h2 class="text-4xl font-heading font-bold mb-4 text-foreground">
            {heading}
          </h2>
          <p class="text-xl text-muted-foreground">
            {description}
          </p>
        </div>
        <div class="mt-1">
          <Button
            href="/services"
            class="bg-primary-black text-white hover:bg-primary-black/90 rounded-full px-8 py-3 group"
          >
            Learn more about our services
            <span
              class="ml-2 transition-transform duration-200 group-hover:translate-x-1"
              >â†’</span
            >
          </Button>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {
        services && services.length > 0 ? (
          services.map((service: ServiceData) => (
            <a
              href={service.link}
              class={`group relative overflow-hidden rounded-lg transition-all duration-300 h-[600px] flex flex-col ${getVariantClasses(service.variant)} hover:shadow-elevated dark:hover:shadow-elevated-dark`}
            >
              <div class="relative h-[400px] w-full overflow-hidden">
                <img
                  src={service.imageUrl}
                  alt={service.title}
                  class="absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                />
                <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/50 group-hover:to-black/60 transition-opacity duration-300" />
              </div>
              <div class="p-8 flex flex-col flex-grow">
                <h3 class="text-2xl font-heading font-bold mb-3 text-white">
                  {service.title}
                </h3>
                <p class="text-white/90">{service.description}</p>
              </div>
            </a>
          ))
        ) : (
          <div class="col-span-4 p-8 text-center">
            <p>No services found.</p>
          </div>
        )
      }
    </div>
  </Container>
</section>
