---
/**
 * Version Badge Component
 * Displays version information and deployment environment
 * @component VersionBadge
 * @example
 * ```astro
 * <VersionBadge />
 * ```
 */
import '@/styles/components/version-badge.css';

interface Props {
  /** Custom class names */
  class?: string;
}

const { class: className } = Astro.props;

// Get version from package.json (this will be replaced at build time)
const version = '1.0.5';

// Determine environment at build time
const isDev = import.meta.env.DEV;
const isPreview = Astro.url.hostname.includes('preview');
const isProduction = Astro.url.hostname.includes('wonderful-pond-07724bc03.1.azurestaticapps.net');
const environment = isDev ? 'dev' : isPreview ? 'preview' : isProduction ? 'prod' : 'unknown';
const environmentClass = isDev
  ? 'env-dev'
  : isPreview
    ? 'env-preview'
    : isProduction
      ? 'env-prod'
      : 'env-unknown';

// Get additional build info if available
const commitHash = import.meta.env.ASTRO_COMMIT_HASH || 'local';
const branch = import.meta.env.ASTRO_BRANCH || (isDev ? 'dev' : isPreview ? 'preview' : 'main');
---

<div
  class={`version-badge ${environmentClass} ${className || ''}`}
  title={`Branch: ${branch} | Commit: ${commitHash}`}
>
  <span class="version-badge__version">v{version}</span>
  <span class="version-badge__environment">{environment}</span>
</div>
